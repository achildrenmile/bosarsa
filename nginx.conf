server {
    listen 80;
    server_name bosarsademo.oeradio.at;
    return 301 https://bosarsa.oeradio.at$request_uri;
}

server {
    listen 80 default_server;
    server_name bosarsa.oeradio.at;

    root /usr/share/nginx/html;
    index index.html;

    # HTML — always revalidate, never serve stale
    location ~* \.html$ {
        add_header Cache-Control "no-cache, must-revalidate";
        try_files $uri $uri/ =404;
    }

    location = / {
        add_header Cache-Control "no-cache, must-revalidate";
        try_files $uri $uri/ =404;
    }

    # Video — cache longer (1 day)
    location ~* \.mp4$ {
        add_header Cache-Control "public, max-age=86400";
    }

    # Images, fonts, icons — cache 1 week
    location ~* \.(png|webp|ico|svg|woff2?|ttf)$ {
        add_header Cache-Control "public, max-age=604800";
    }

    # SEO files — cache 1 day
    location ~* (robots\.txt|sitemap\.xml|llms\.txt)$ {
        add_header Cache-Control "public, max-age=86400";
    }

    location / {
        try_files $uri $uri/ =404;
    }
}
